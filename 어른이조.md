### 데이터 분석 플렛폼 COMPAS 에서 진행하는 오산시어린이 교통사고 위험지역 도출 과제

---

- __과제 1 : 어린이 보호구역 외 어린이 교통사고 위험지역 20개소 제시__ 

- __과제 2 : 기존 어린이 보호구역 중 교통 안전 시설물* 우선 설치 지역 20개소 제시 (ex. 과속단속카메라 , 교통안전표지판 , 미끄럼방지시설 , 과속방지턱 , 가스휀드 등)__ 



__TODO.__

__12/26__ 

data explore ( ~12/29) , 9번 데이터(어린이 보호구역) 공통

1. 이동재 : 30번 데이터 (학원 및 교습소 현황)
2. 이찬주 : 8번 데이터 (유동인구)
3. 박희원 : 1번 , 3번 데이터 (주정차 단속 데이터 , 차량등록현황 격자 데이터)
4. 정성훈 : 32번 , 4번 데이터 (오산시 행정경계 데이터 , 연령별 총 인구수 데이터)

---

__12/29__ 

data explore ( ~12/31) , 9번 데이터(어린이 보호 구역) + folium 기초 시각화

1. 이동재 : 30번 데이터 (학원 및 교습소 현황)
   - 각 보호구역 반경(xxm) 에 학원이나 교습소는 얼마나 있나 평균적으로? (지도 거리 계산)
2. 이찬주 : 8번 데이터 (유동인구)
   - 8번 시간대별 유동인구 변화 -> 동적 그래프 구현 :star:  __=> 렌더링? 문제__ 
   - 유동인구와 스쿨존 상관관계(?) 파악 ==> 격자를 읍면동으로 변환 할 수 있는지?
   - 9번 데이터에 대해 추가 eda : cctv, 도로폭
3. 박희원 : 1번 , 3번 데이터 (주정차 단속 데이터 , 차량등록현황 격자 데이터)
   - 차량 등록 격자 데이터 테두리+cnt 를 지도에 시각화 => 주정차 단속 데이터와의 관계
   - 총 인구 데이터(격자) 와 주정차 단속 데이터와의 관계 (linear 한지)
   - 13(어린이집 좌표)번가지고 어느 동에 어린이집이 가장많은지 + 10번(초등학교 좌표) 가능하면 ==> 기존 어린이 보호구역을 마커로 표시해서 확인
4. 정성훈 :  2번 데이터 (오산시 행정경계 데이터 , 연령별 총 인구수 데이터)
   - 어린이 보호구역 + 어린이교통사고 빈번한곳(3회이상)의 격자와의 교집합 도출

---

__12/31__ 

data explore ( ~1/3) , 9번 데이터(어린이 보호 구역) + folium 기초 시각화
1. 이동재 : 30번 , 21번 데이터 (학원 및 교습소 현황 , 인도 geojson 데이터)
   
   - 어린이 빈번 교통사고 격자 + 학원 데이터 상관관계
   - 인도 데이터 
2. 이찬주 : 8번 데이터 (유동인구)
   - 8번 시간대별 유동인구 변화 -> 동적 그래프 구현 :star:  __=> 렌더링? 문제__ (보류)
   
   - 9번 데이터에 대해 추가 eda : cctv, 도로폭
3. 박희원 : 20번 , 19번 , 17번데이터 (CCTV , 신호등 , 횡단보도)
   - 2번 과제 관련해서 현 어린이보호구역에서 교통 안전 시설물이 어떻게 분포되어 있나 조사
4. 정성훈 :  2번 데이터 (오산시 행정경계 데이터 , 연령별 총 인구수 데이터)
   - 어린이교통사고 빈번한곳(3회이상) + 도로망종류(상세) + 교통량(혼잡도) => 시각 확인 + 그래프

---

__1/3__ 

data explore ( ~1/5) , 9번 데이터(어린이 보호 구역) + folium 기초 시각화

1. 이동재 : 22번 버스 정류장 데이터 , 19. 신호등 , 24번

   - 버스정류장 => 어린이 보호구역 수 , 사고
   - 상세도로망  <=> 어린이 교통 사고 발생 격자 시각화! (__main__)
   - 건축 .......+ 사고.. 
2. 이찬주 : 8번 데이터 (유동인구) , 2번 (어린이교통사고 데이터)
   - 2번 어린이 교통 사고 + 8번 평균 유동인구 수치 연관성
   - 횡단보도 , 과속방지턱 어떻게 생겼는지 탐구 
3. 박희원 : 20번 , 19번 , 17번데이터 (CCTV , 신호등 , 횡단보도)
   - CCTV , 신호등 , 횡단보도 데이터 끼리의 분포는 지도로 확인 => 기존 어린이 보호 구역이랑
   - 무인단속카메라 <-> 주정차 단속
   - 도로안전표준데이터 다뤄보기?
4. 정성훈 :  2번 데이터 (오산시 행정경계 데이터 , 연령별 총 인구수 데이터)
   - 상세도로망 + 추정 교통량 시각화 완료 => 어린이 사고구역 연결 (pdk)

---

__1/5 ~1/6__ 



__공통의견__ : 

- EDA 도 병행하긴 하는데, 지금 시점부터 우리 팀 나름의 스코어식을 정해서 과제에 맞게 제시할 수 있는 기준을 정해야 한다. (Ex. 어린이 교통 사고 데이터에서 발생 수를 하나의 변수로)

> 위험도 = w1\*x1 + w2\*x2 + .....

- 배경지식 , "어린이 보호구역이란?" , 등 관련 조사 내용 md 파일을 따로 만들어 관리 (domain)
- geometry shape 내/외부 조사 가능하니까 이제 count 하는 코드 작성 가능
- 어떤 데이터가 중요한지 정하는 기준을 우리끼리 통일해야한다!
- __"주거지역(아파트,주택) 주변인가?" == 핵심 요소__ 

# `Q` 

1. 제시 반경 50M 단위? 무조건 50M?
2. 제시 위치 => 꼭 무슨 위치여야하는건지, 참가자 분석에 따라 붙일 수 있는지
3. 어린이보호구역 VS 위험지역 제시 : "어린이 보호구역" 지정에 필요한 모든 전제조건을 만족하는 곳이 아니더라도 "위험요소" 가 많다고 판단되는 곳들을 제시할 수 있게끔 의도한건지.

# `HW`

1. 이동재 : 22번 버스 정류장 데이터 , 상세도로망 , 도로명건축

   - 사고 2건 이상으로 바꾸고, 그림에서 포함 안된곳을 일단 후보로 생각하자.
   - folium 이든, 어린이보호구역에 완전히 포함되는 사고격자 제외해보기

2. 이찬주 : 8번 데이터 (유동인구) , 2번 (어린이교통사고 데이터)

   - 2번 어린이 교통 사고 + 8번 평균 유동인구 수치 연관성 + 유소년 연령별 격자데이터

   - 횡단보도 , 과속방지턱 어떻게 생겼는지 탐구 

3. 박희원 : 20번 , 19번 , 17번데이터 (CCTV , 신호등 , 횡단보도)

   - 학원 및 교습소 + 유소년 인구 데이터 ( )
   - 특정 어린이보호 구역에 땡땡 교통안전시설물이 없다 => 설치하자 하는 후보 2~3개만

4. 정성훈 :  2번 데이터 (오산시 행정경계 데이터 , 연령별 총 인구수 데이터)

   - pydeck 이든 folium 이든, 어린이보호구역에 완전히 포함되는 사고격자 제외해보기 + 추정 교통량
   - 문의하기

---

__1/10__

# `HW`

1. 이동재 : (1번 과제) 

   - 어느동인가? 지표만들기 (동별 기존 어린이보호구역 수 + 유동인구 격자 데이터)
   - 후보 격자가 어느 도로를 내포하는지 함수 만들 수 있으면 작성

2. 이찬주 : (2번 과제)

   - 동별 경계 , 기존 어린이 보호구역 : 일단 그려놓고 시작
   - 어떤 교통 안전 시설물로 할지 (15.오산시_무인교통단속카메라.csv)
   - 보호구역 원 안에  유소년 총인구 격자데이터 , 단속카메라 데이터를 조사해서 
   - 보호구역 별 단속카메라 수 / 유소년 인구수 지표 만들어보기

3. 박희원 : (2번 과제)

   - 상세도로폭을 같이 참고하면서 방지턱 후보들 중에 "좁은" 도로인 애들을 우선적으로 뽑아보자
   - 다른 교통 안전시설물에 대해서도 동일한 호보 추출하기 (CCTV , 신호등)

4. 정성훈 :  (1번 과제)

   - 후보 격자가 어느 도로를 내포하는지 함수 만들 수 있으면 작성
   - 혼잡_대수 정규화 값 & 도로 폭을 가중치로 사용할 수 있게 지표화

---

__1/13__ 

__급한거__ : 

1. 스코어식을 만들어야한다
2. 그래서 스코어식에 쓸 feature가 필요하다
3. 회귀식에 가능한 많은 feature 때려박아서 feature importance 조사해서 top3 , top5 정도를 뽑자
4. 어떤 feature들이 있는가?



# `HW`

> __과제1__ (이동재,정성훈)

- 후보 격자가 어느 도로를 내포하는지 함수 만들 수 있으면 작성

1. 후보격자 중심에서 300m 내에 있는 유치원,어린이집,초등학교 수 (3개 칼럼)             __(완료)__
2. 격자 내부 유동인구 합 __(완료)__ 
3. 후보격자 중심에서 300m 내에 있는 과속방지턱,단속카메라 수 (2개 칼럼)                __(완료)__
4. 도로폭은 일단 대기 (가능한지 모름)
5. 후보격자 중심에서 300m 내에 있는 학원 & 보육원 수 (2개 칼럼)                       __(학원 너무 많음... 분류필요, 보육원 진행중)__
6. 후보격자 중심에서 100m 내에 버스정류장 수                                         __(300m/100m 각각 완료)__
7. 후보격자 중심에서 200m 주변 유소년 총인구 데이터 __(완료)__ 
8. 교통량,혼잡경험차수 는 일단 대기 (가능한지 모름)

> __과제2__ (이찬주,박희원)

- 보호구역 별 단속카메라 수 / 유소년 인구수 지표 만들어보기
- 어린이보호구역별로 무인교통단속카메라 갯수 카운트
- 어린이보호구역별로 불법주정차단속 횟수 카운트
- 방지턱 후보들 => 좌표값 
- CCTV , 신호등 : 각 어린이구역별 숫자 기준으로 후보 확인하기

---

__1/17__ 

# `HW`

> __과제1__ (이동재,정성훈)

- 칼럼 통합 및 회귀식 완성
- 성능 측정 및 feature importance extracting
- Top3 칼럼 선정
- `드라이브 > 판도라 > data.geojson`  으로 관리

> __과제2__ (이찬주,박희원)

- 보호구역 별 단속카메라 수 / 유소년 인구수 지표 만들어보기
- 카운팅 기반 칼럼 생성 및 등수(1~92등) 에 따른 점수(?) 부여로 스코어식

---

__1/19__ 

case study : 조사를 나갔더니 노가다 좋은 공통 (수작업)

model study : 이상적 구역 선정 후 미달 구역 sorting



# `HW`

==> 일단 보류하고 1/20 9:30 PM 다시 모여서 한시간 미만 컷

+ 시나리오 각자 문서로 작성해서 공유할 예정 ok?

> __과제1__ (이동재,정성훈)

- 서로 가진 data.csv 파일 통일
- best model 확인
- 동재 : SVL , Ada , Lgbm

> __과제2__ (이찬주,박희원)

- ㅇlscp ? : Least Segment Concatable Perplexity

---

__1/23__ 

# `HW` 

> __과제1__ (이동재,정성훈)

- 서로 가진 data.csv 파일 통일 : 오늘 안끝내면 우린 갭니다.
- modeling : 성훈 (score)
- 제출파일 여러개 파일로 해야될거 같은데 가능?? ==> 질문
- 통합 시작 : 전처리부분 작성 , 한글 물어봐야댐 , EDA

> __과제2__ (이찬주,박희원)

- LCJ : lhm style eda formatting

  - 1. 오산시 어린이보호구역 현황

    2. 오산시 인구데이터 현황

- 각 칼럼별로 mean , median , cut , 등등 점수화 시켜서 한 어린이보호구역에 대한 점수 !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!

- 희원 : 결과보고서 뼈대 & 디자인 

---

__1/25__ 

# `HW` 

- 이동재 : 전처리중에 다른이름 저장파일 , 오산시 전반 EDA 참고해서 작성 , 성훈꺼 컬럼생성 , 2팀꺼 컬럼생성
- 이찬주 : 스코어 값 조정 , 20개 선정 &픽스 , 
- 박희원 : 픽스 후 , 세부 설치 지역 , 피피티
  - fillna ( 미기재 , 0 )
  - 오입력 데이터 처리
  - stopwords 필터링
- 정성훈 : 모델링 끝 , 과제1&과제2 세부 EDA 추가 내용



__1/26__ 

- 이동재 : 공통 EDA 마무리 , 사고횟수별 folium
- 정성훈 : modeling 마무리 , 끝나면 다시 얘기
- 박희원 : 20곳 후보에서 세부 설치물&위치 지정
- 이찬주 : 오전까지 20곳 선정 픽스




### 진행했던 PoC 모음 

> 유동인구가 많은 곳에 어린이 보호구역이 많을까? (찬주)

- YES(어린이보호구역+평균유동인구.png). 오산시의 2019년 1~12월 평균 유동인구 히트맵과 어린이 보호구역을 비교해본 결과, 평균 유동인구가 높은 지역에 어린이 보호구역이 많음을 알 수 있었다. 동으로는 `오산동` 이 평균유동인구와 어린이보호구역이 가장 많은 것으로 보인다.

> 어린이 교통사고는 주로 어디서 일어날까? (성훈)

- "교차로" , 사고횟수 3회이상 / 5회이상 / 7회이상/ 10회 비교시, 사고가 빈번한곳일수록 도로의 크기(폭)가 커진다.

> 총 인구수가 많은 격자 근방에는 학원이나 교습소 분포가 많을까? 그리고 그러한 위치에는 항상 어린이 보호구역이 밀집되어 있는가? (동재)

- 궐동과 갈곶동의 경우 전제가 맞았다. 하지만 인구가 가장 많은 금암동의 경우 전제와 상반되는 결과를 확인했다. `총 인구수` 가 아니라 `유소년층` 으로 조사했을때 달라지는 점이 있는지 확인할 예정
>인구와 차량등록이 많은 지역이 더 주정차 단속에 많이 걸렸을까?(희원)

- 거의 그렇게 비례하는 편이다.

> 오산시의 지역들 중어느곳에서 주정차 단속이 가장많은가? (희원)

-  궐동,원동,금암동,수정동 순서로 많다. 

> 오산시 어린이 보호구역은 **초등학교**  , **유치원**: 공립,사립,민간 **어린이집**: 공립(희원)

- 어린이 보호구역에 해당하지 않는 가정 어린이집이 가장 오산시에 많이 존재했다.

> 보호구역과 cctv (희원)

- 보호구역 근처에는 A,C유형의 cctv가 많으며, 보호구역은 학교자체의 위경도로 추측된다.
- 어린이 보호구역 근처에 cctv가 없더라도, 횡단 보도와 신호등 근처라면 cctv들이 존재한다.

> 횡단보도와 cctv 그리고 신호등 (희원)

- 횡단보도 근처에는 cctv가 항상 붙어있다.
- 횡단보도가 있다고 하여, 다 신호등이 존재하지 않는다. 하지만 가까운 거리에 cctv들이 존재한다.

> 어린이 교통사고 빈번 발생 격자는 주변에 학원이 있는 어린이 보호구역 근처일까? (동재)

- 갈곶동만 어느정도 가정에 해당. 나머지는 주로 대로변 교차로 혹은 단지와 단지 사이에서 빈번했다.

> 인도의 재질, 자전도 도로 유무의 차이가 어린이 교통사고와 관련이 있는가? (동재)

- 재질의 경우 "기타"에 해당하는 항목이 대부분이라 그런지 특별한 인사이트는 없었음
- 자전거 도로의 경우 "무"에 해당하는 도로에서가 더 어린이 교통사고 발생이 많았다. (이게 왜 그런거지?)
